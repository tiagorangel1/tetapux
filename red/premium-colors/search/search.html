<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>HetaSearch</title>
	<style>
		:root, body.light {
			--primary: #0d47a1;
			--text: #212121;
			--bg: #faf9f7;
			--shadow: 0 0 4px rgba(0,0,0,0.1);
			--border: #e8eaed;
		}

		body.dark, body.dark * {
			--primary: #0d47a1;
			--text: #e8eaed;
			--bg: #1a1a1a;
			--shadow: 0 0 8px rgba(0,0,0,0.4);
			--border: #353535;
		}

		body {
			font-family: 'Arial', sans-serif;
			margin: 0;
			background: var(--bg);
			color: var(--text);
			transition: background 0.3s, color 0.3s;
			min-height: 100vh;
			display: flex;
			flex-direction: column;
		}

		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
			flex: 1;
		}

		.header {
			margin-bottom: 30px;
			text-align: center;
		}

		.search-bar {
			position: relative;
			max-width: 600px;
			margin: 0 auto 20px;
			background: var(--bg);
			border: 1px solid var(--border);
			border-radius: 24px;
			overflow: hidden;
			box-shadow: var(--shadow);
			transform: translateY(-1px);
			transition: box-shadow 0.2s;
		}

		.search-bar:focus-within {
			box-shadow: var(--shadow), 0 4px 6px rgba(0,0,0,0.2);
		}

		#search-input {
			width: calc(100% - 50px);
			padding: 12px 16px;
			border: 0;
			background: transparent;
			color: inherit;
			font-size: 16px;
			outline: none;
		}

		#search-button {
			position: absolute;
			right: 0;
			top: 0;
			height: 100%;
			padding: 0 24px;
			background: var(--primary);
			color: white;
			border: 0;
			cursor: pointer;
			font-size: 14px;
			font-weight: 500;
			border-radius: 0 24px 24px 0;
			transition: background 0.2s;
		}

		#search-button:hover {
			background: #1e88e5;
		}

		.results {
			max-width: 800px;
			margin: 20px auto;
			background: var(--bg);
			border-radius: 12px;
			padding: 20px;
			box-shadow: var(--shadow);
			transform: translateY(2px);
			transition: transform 0.3s;
		}

		.results:hover {
			transform: translateY(0);
		}

		.result {
			padding: 15px;
			border-bottom: 1px solid var(--border);
			transition: background-color 0.3s;
		}

		.result:hover {
			background: rgba(13, 71, 161, 0.05);
		}

		.result a {
			color: var(--primary);
			font-size: 18px;
			text-decoration: none;
			transition: color 0.2s;
		}

		.result a:hover {
			color: #1e88e5;
			text-decoration: underline;
		}

		.result p {
			color: var(--text);
			font-size: 14px;
			margin: 8px 0;
			line-height: 1.6;
		}

		.url {
			font-size: 13px;
			color: #808080;
			margin-top: 4px;
			word-break: break-all;
		}

		.pagination {
			display: flex;
			justify-content: center;
			gap: 12px;
			margin-top: 20px;
		}

		.page-button {
			padding: 8px 12px;
			border: 1px solid var(--border);
			border-radius: 4px;
			cursor: pointer;
			transition: background-color 0.2s, color 0.2s;
			color: inherit;
		}

		.page-button.active,
		.page-button:hover {
			background: var(--primary);
			color: white;
			border-color: var(--primary);
		}

		mark {
			background: var(--primary);
			color: white;
			padding: 0 2px;
			border-radius: 2px;
			font-weight: bold;
		}

		#dark-mode-toggle {
			position: fixed;
			top: 15px;
			right: 15px;
			padding: 8px 16px;
			background: var(--primary);
			color: white;
			border: none;
			border-radius: 20px;
			cursor: pointer;
			transition: background 0.2s;
		}

		#dark-mode-toggle:hover {
			background: #1e88e5;
		}

		@media (max-width: 600px) {
			.search-bar { max-width: 95%; }
			.results { padding: 12px; }
			.page-button { padding: 6px 8px; }
		}
	</style>
</head>
<body class="dark">
	<div class="container">
		<div class="header">
			<h1>HetaSearch</h1>
		</div>
		<div class="search-bar">
			<input type="text" id="search-input" placeholder="Search...">
			<button id="search-button">Search</button>
		</div>
		<div class="results" id="results"></div>
		<div class="pagination" id="pagination"></div>
	</div>
	<button id="dark-mode-toggle">Toggle Theme</button>
	<script>
		const pages = [
			{ title: "HetaSearch Cloud Platform", content: "Next-gen cloud solutions for developers.", url: "https://hetasearch.com/cloud " },
			{ title: "Data Science Solutions", content: "AI-driven analytics for business growth.", url: "https://example.com/data-science " },
			{ title: "HetaSearch Labs", content: "Research in quantum computing and ML.", url: "https://hetasearch.com/labs " },
			{ title: "Cybersecurity Insights", content: "Protect your digital assets with HetaSec.", url: "https://example.com/cybersecurity " },
			{ title: "DevOps Automation", content: "CI/CD pipelines & cloud integration.", url: "https://example.com/devops " }
		];

		const searchInput = document.getElementById('search-input');
		const resultsDiv = document.getElementById('results');
		const darkModeToggle = document.getElementById('dark-mode-toggle');
		const paginationDiv = document.getElementById('pagination');

		let currentPage = 1;
		const resultsPerPage = 15;

		function init() {
			const urlParams = new URLSearchParams(window.location.search);
			const pageParam = urlParams.get('page');
			const queryParam = urlParams.get('q');
			if (pageParam) currentPage = parseInt(pageParam);
			if (queryParam) searchInput.value = decodeURIComponent(queryParam);
			performSearch(searchInput.value);
		}

		function performSearch(query) {
			if (!query.trim()) {
				resultsDiv.innerHTML = '';
				paginationDiv.innerHTML = '';
				return;
			}

			const filtered = pages.filter(page => {
				return page.title.toLowerCase().includes(query.toLowerCase()) ||
					page.content.toLowerCase().includes(query.toLowerCase());
			});

			const sorted = filtered.sort((a, b) => {
				const aScore = (a.title.toLowerCase().indexOf(query.toLowerCase()) === 0 ? 3 : 0) +
					(a.title.toLowerCase().includes(query.toLowerCase()) ? 2 : 0) +
					(a.content.toLowerCase().includes(query.toLowerCase()) ? 1 : 0);
				const bScore = (b.title.toLowerCase().indexOf(query.toLowerCase()) === 0 ? 3 : 0) +
					(b.title.toLowerCase().includes(query.toLowerCase()) ? 2 : 0) +
					(b.content.toLowerCase().includes(query.toLowerCase()) ? 1 : 0);
				return bScore - aScore;
			});

			displayPageResults(sorted);
			updatePagination(sorted.length);
		}

		function displayPageResults(results) {
			const totalPages = Math.ceil(results.length / resultsPerPage);
			if (currentPage > totalPages) currentPage = totalPages;

			const start = (currentPage - 1) * resultsPerPage;
			const end = start + resultsPerPage;
			const currentResults = results.slice(start, end);

			resultsDiv.innerHTML = currentResults.map(page => `
				<div class="result">
					<a href="${page.url}" target="_blank">${highlightText(page.title, searchInput.value.toLowerCase())}</a>
					<div class="url">${page.url}</div>
					<p>${highlightText(page.content, searchInput.value.toLowerCase())}</p>
				</div>
			`).join('');
		}

		function updatePagination(totalResults) {
			const totalPages = Math.ceil(totalResults / resultsPerPage);
			const pageButtons = [];

			if (totalPages === 0) return;

			paginationDiv.innerHTML = '';

			// Previous button
			let prevButton = document.createElement('div');
			prevButton.className = 'page-button' + (currentPage === 1 ? ' disabled' : '');
			prevButton.textContent = 'Previous';
			prevButton.disabled = currentPage === 1;
			prevButton.addEventListener('click', () => {
				if (currentPage > 1) currentPage--;
				performSearch(searchInput.value);
			});
			paginationDiv.appendChild(prevButton);

			// Page numbers
			for (let i = 1; i <= totalPages; i++) {
				const btn = document.createElement('div');
				btn.className = 'page-button' + (i === currentPage ? ' active' : '');
				btn.textContent = i;
				btn.onclick = () => {
					currentPage = i;
					performSearch(searchInput.value);
				};
				paginationDiv.appendChild(btn);
			}

			// Next button
			let nextButton = document.createElement('div');
			nextButton.className = 'page-button' + (currentPage === totalPages ? ' disabled' : '');
			nextButton.textContent = 'Next';
			nextButton.disabled = currentPage === totalPages;
			nextButton.addEventListener('click', () => {
				if (currentPage < totalPages) currentPage++;
				performSearch(searchInput.value);
			});
			paginationDiv.appendChild(nextButton);

			// updateURL параметр query и текущая страница

            // real
		}

		function highlightText(text, query) {
			if (!query) return text;
			const regex = new RegExp(query, 'gi');
			return text.replace(regex, match => `<mark>${match}</mark>`);
		}

		document.getElementById('search-button').addEventListener('click', () => {
			const query = searchInput.value.trim();
			currentPage = 1;
			updateURL(query);
			performSearch(query);
		});

		searchInput.addEventListener('input', (e) => {
			const query = e.target.value.trim();
			if (!query) {
				resultsDiv.innerHTML = '';
				paginationDiv.innerHTML = '';
			} else {
				currentPage = 1;
				performSearch(query);
			}
		});

		darkModeToggle.addEventListener('click', () => {
			document.body.classList.toggle('dark');
			document.body.classList.toggle('light');
			localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
			performSearch(searchInput.value);
		});

		function updateURL(query) {
			const params = new URLSearchParams();
			if (query) params.set('q', query);
			if (currentPage > 1) params.set('page', currentPage);
			history.pushState(null, '', `?${params.toString()}`);
		}

		window.addEventListener('popstate', (e) => {
			const urlParams = new URLSearchParams(window.location.search);
			const pageParam = urlParams.get('page');
			const queryParam = urlParams.get('q');
			currentPage = pageParam ? parseInt(pageParam) : 1;
			searchInput.value = queryParam || '';
			performSearch(searchInput.value);
		});

		const savedTheme = localStorage.getItem('theme');
		if (savedTheme) {
			document.body.classList.add(savedTheme);
			document.body.classList.toggle('dark', savedTheme === 'dark');
			document.body.classList.toggle('light', savedTheme === 'light');
		}

		init();
	</script>
</body>
</html>